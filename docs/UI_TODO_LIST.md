# UI実装TODOリスト

## 🎨 デザインシステム「TRDS (Torii Resonance Design System)」の実装

### カラーパレット（既存）
- ✅ 和紙 (washi): #fcfaf2
- ✅ 墨 (sumi): #1c1c1c
- ✅ 朱 (shu): #d3381c
- ✅ 松 (matsu): #4a593d
- ✅ 金 (kin): #c7b370
- ✅ 桜 (sakura): #eec4ce
- ✅ 琥珀 (kohaku): #bf783a

### コンポーネント（既存）
- ✅ Ofudaカード（お札風カード）
- ✅ Hankoボタン（印鑑風ボタン）
- ✅ Toast通知
- ⚠️ 縦書きテキストスタイル（実装済みだが改善の余地あり）

---

## 📱 1. ゲームUI (`shinkanki_web`)

### 1.1 ホーム画面・ナビゲーション
- [ ] **ホーム画面の改善** (`/`)
  - 現在: Phoenixデフォルトのホーム画面
  - 必要: 神環記のテーマに合わせたランディングページ
  - ゲーム説明、ルール概要、開始ボタン
  - TRDSのデザイン適用

- [ ] **ナビゲーションメニュー**
  - ゲーム一覧/ルーム選択へのリンク
  - ユーザー設定へのリンク
  - ログアウトボタン

### 1.2 ルーム管理UI
- [ ] **ルーム一覧画面** (`/rooms` または `/game/rooms`)
  - ルーム作成フォーム
  - 既存ルーム一覧表示
  - ルーム参加ボタン
  - 公開/非公開ルームの表示
  - ルーム検索・フィルタ機能

- [ ] **ルーム作成モーダル/ページ**
  - ルーム名入力
  - 公開/非公開設定
  - 最大プレイヤー数設定
  - 作成ボタン（Hankoスタイル）

### 1.3 ゲーム画面の拡張（`/game/:room_id`）

#### 既存実装（改善が必要）
- ✅ 基本レイアウト（サイドバー、メインボード、手札）
- ✅ Life Index表示（円形ゲージ）
- ✅ F/K/Sゲージ表示
- ✅ 手札カード表示
- ✅ チャット機能

#### 追加・改善が必要なUI

- [ ] **フェーズ表示UI**
  - 現在のフェーズ表示（イベント、相談、アクション、減衰、生命更新、判定）
  - フェーズ進行インジケーター
  - フェーズ説明テキスト

- [ ] **イベントカード表示**
  - イベントフェーズで表示されるイベントカード
  - カード詳細モーダル
  - イベント効果の説明

- [ ] **才能カードUI**
  - プレイヤーが持つ才能カードの表示
  - 才能カードをアクションカードに重ねるUI
  - 最大2枚まで重ねられる表示

- [ ] **共創プロジェクトカードUI**
  - プロジェクトカードの表示エリア
  - 進行状況の表示
  - 才能カードを捧げるUI
  - 完成時の恩恵表示

- [ ] **プレイヤー情報表示**
  - 現在のプレイヤー役割表示（森の守り手、文化の継承者、コミュニティの灯火、空環エンジニア）
  - 他のプレイヤーの状態表示
  - プレイヤーアバター/アイコン

- [ ] **ターン進行UI**
  - 現在のターン数表示（既存だが改善）
  - ターン進行バー
  - 残りターン数の強調表示

- [ ] **アクション実行UI**
  - カード選択時の詳細表示
  - アクション実行確認モーダル
  - コスト（空環）の確認表示
  - 効果のプレビュー

- [ ] **減衰（Demurrage）表示**
  - 減衰フェーズのアニメーション
  - 減衰前後の空環ポイント表示
  - 減衰率の説明

- [ ] **エンディング画面**
  - 🌈 神々の祝福エンディング (L >= 40)
  - 🌿 浄化の兆しエンディング (30 <= L < 40)
  - 🌙 揺らぎの未来エンディング (20 <= L < 30)
  - 🔥 神々の嘆き（文明崩壊）(L <= 19)
  - 💀 即時ゲームオーバー (F=0 or K=0 or S=0)
  - エンディングごとの専用デザイン
  - ゲーム結果の統計表示
  - 再プレイボタン

- [ ] **ゲーム履歴・ログ表示**
  - ターンごとの履歴表示
  - アクション履歴
  - イベント履歴
  - スクロール可能な履歴パネル

- [ ] **ゲーム設定・オプション**
  - 音声設定（将来的なWebRTC用）
  - UI設定（テーマ切り替えなど）
  - ゲーム終了・退出ボタン

### 1.4 カード詳細UI
- [ ] **カード詳細モーダル**
  - カードをクリック/ホバーで詳細表示
  - カードタイプ（アクション、イベント、才能、プロジェクト）の説明
  - コスト、効果の詳細表示
  - 使用可能条件の表示

### 1.5 レスポンシブデザインの改善
- [ ] **モバイル最適化**
  - サイドバーのモバイル表示（既存だが改善）
  - ゲージのモバイル表示最適化
  - 手札のスクロール改善（既存だが改善）
  - タッチ操作の最適化

- [ ] **タブレット最適化**
  - 中間サイズでのレイアウト調整
  - タッチ操作の改善

---

## 🔐 2. 認証UI (`rogs_identity`)

### 既存実装（改善が必要）
- ✅ ログイン画面 (`/users/log-in`)
- ✅ 登録画面 (`/users/register`)
- ✅ パスワードリセット (`/users/forgot-password`, `/users/reset-password/:token`)
- ✅ 設定画面 (`/users/settings`)

### 改善・追加が必要なUI

- [ ] **TRDSテーマの適用**
  - 既存の認証画面にTRDSを適用
  - 和紙風の背景
  - 朱色のアクセント
  - 印鑑風のボタン

- [ ] **ホーム画面の改善** (`/`)
  - 現在: Phoenixデフォルト
  - 必要: 神環記のブランディング
  - ゲームへの導線

- [ ] **ユーザープロフィール表示**
  - ユーザー名表示
  - アバター設定（将来的に）
  - プレイ履歴へのリンク

- [ ] **エラーメッセージの改善**
  - TRDSに合わせたエラー表示
  - より分かりやすいエラーメッセージ

---

## 💬 3. チャットUI (`rogs_comm`)

### 既存実装
- ✅ チャットLiveView (`/rooms/:room_id/chat`)
- ✅ メッセージ送信機能
- ✅ リアルタイム更新

### 改善・追加が必要なUI

- [ ] **TRDSテーマの適用**
  - チャット画面のデザイン改善
  - 和紙風のメッセージ背景
  - 墨色のテキスト
  - 朱色のアクセント

- [ ] **チャット機能の拡張**
  - メッセージの編集・削除（将来的に）
  - 絵文字・リアクション（将来的に）
  - ファイル添付（将来的に）

- [ ] **WebRTC音声チャットUI**
  - 音声チャット開始/終了ボタン
  - マイクON/OFF表示
  - スピーカーON/OFF表示
  - 参加者の音声状態表示

- [ ] **ルーム一覧の改善**
  - ホーム画面 (`/`) の改善
  - ルーム作成UI
  - ルーム検索・フィルタ

---

## 🎮 4. ゲームフローUI

### 4.1 ゲーム開始フロー
- [ ] **プレイヤー役割選択画面**
  - 4つの役割の説明
  - 役割選択UI
  - 役割ごとの色分け（森=松、文化=桜、コミュニティ=琥珀、空環=金）

- [ ] **ゲーム準備画面**
  - 参加プレイヤーの表示
  - 全員の準備完了待ち
  - ゲーム開始ボタン（ホストのみ）

### 4.2 ゲーム進行中のUI
- [ ] **フェーズ遷移アニメーション**
  - フェーズ切り替え時のトランジション
  - フェーズ名の表示アニメーション

- [ ] **アクション確認UI**
  - カード使用前の確認ダイアログ
  - 効果のプレビュー
  - コストの確認

- [ ] **リアルタイム更新の視覚的フィードバック**
  - パラメータ変更時のアニメーション
  - カード使用時の視覚的フィードバック
  - 他のプレイヤーのアクション表示

### 4.3 ゲーム終了フロー
- [ ] **結果表示画面**
  - 最終パラメータの表示
  - エンディングの表示
  - 統計情報（使用したカード、アクション数など）
  - 共有ボタン（将来的に）

---

## 🎨 5. 共通UIコンポーネント

### 5.1 レイアウトコンポーネント
- [ ] **ゲームレイアウトの改善** (`layouts/game.html.heex`)
  - ヘッダー/フッターの追加
  - ナビゲーションの追加
  - ローディング状態の表示

- [ ] **共通レイアウトの統一**
  - 全アプリで統一されたレイアウト
  - ブランディングの一貫性

### 5.2 フォームコンポーネント
- [ ] **TRDSテーマのフォーム**
  - 入力フィールドのスタイリング
  - エラー表示の改善
  - バリデーションメッセージの表示

### 5.3 モーダル・ダイアログ
- [ ] **モーダルコンポーネント**
  - カード詳細モーダル
  - 確認ダイアログ
  - 設定モーダル
  - TRDSテーマの適用

### 5.4 ローディング・状態表示
- [ ] **ローディングインジケーター**
  - ゲーム読み込み中の表示
  - アクション実行中の表示
  - TRDSテーマのローディングアニメーション

- [ ] **空状態の表示**
  - 手札が空の時の表示
  - メッセージがない時の表示
  - ルームがない時の表示

### 5.5 アニメーション
- [ ] **マイクロインタラクション**
  - ボタンホバー効果（既存だが改善）
  - カード選択アニメーション（既存だが改善）
  - パラメータ変更アニメーション（既存だが改善）
  - フェーズ遷移アニメーション

---

## 📊 6. データ表示UI

### 6.1 統計・履歴表示
- [ ] **ゲーム統計ダッシュボード**
  - プレイヤーごとのアクション数
  - 使用したカードの統計
  - パラメータの推移グラフ

- [ ] **履歴タイムライン**
  - ターンごとのイベント表示
  - スクロール可能な履歴
  - フィルタ機能

### 6.2 プレイヤー情報表示
- [ ] **プレイヤーカード**
  - プレイヤー名、役割表示
  - 現在の状態表示
  - アバター表示（将来的に）

---

## 🔧 7. 設定・管理UI

### 7.1 ゲーム設定
- [ ] **ゲーム設定画面**
  - 音声設定
  - 通知設定
  - UI設定（テーマ、フォントサイズなど）

### 7.2 ルーム管理
- [ ] **ルーム管理画面**（ホスト向け）
  - プレイヤーの管理
  - ゲーム設定の変更
  - ルームの削除

---

## ♿ 8. アクセシビリティ

### 既存実装
- ✅ ARIAラベルの一部実装
- ✅ キーボードナビゲーションの一部実装

### 追加・改善が必要
- [ ] **キーボードナビゲーションの完全実装**
  - すべてのインタラクティブ要素へのアクセス
  - フォーカス管理の改善

- [ ] **スクリーンリーダー対応**
  - 適切なARIAラベルの追加
  - ライブリージョンの適切な使用
  - 状態変更の通知

- [ ] **色のコントラスト**
  - WCAG AA準拠の確認
  - 色だけでなく形状でも情報を伝える

---

## 📱 9. レスポンシブデザイン

### 既存実装
- ✅ 基本的なレスポンシブ対応（モバイル、タブレット、デスクトップ）

### 改善が必要
- [ ] **モバイル最適化の強化**
  - タッチターゲットサイズの最適化
  - スワイプジェスチャーの追加
  - モバイル専用のナビゲーション

- [ ] **タブレット最適化**
  - 中間サイズでのレイアウト調整
  - タッチ操作の最適化

---

## 🎯 優先度の高い項目

### 高優先度（ゲームプレイに必須）
1. **フェーズ表示UI** - ゲーム進行に必須
2. **イベントカード表示** - イベントフェーズに必須
3. **才能カードUI** - アクションフェーズに必須
4. **共創プロジェクトカードUI** - プロジェクト機能に必須
5. **エンディング画面** - ゲーム終了時に必須
6. **プレイヤー役割選択画面** - ゲーム開始に必須
7. **アクション確認UI** - 誤操作防止に必須

### 中優先度（UX向上）
8. **ルーム管理UI** - ゲーム参加に必要
9. **カード詳細モーダル** - 情報確認に便利
10. **ゲーム履歴表示** - 進行状況の把握に便利

### 低優先度（将来的な拡張）
11. **WebRTC音声チャットUI** - 音声機能実装時に
12. **統計ダッシュボード** - 分析機能追加時に
13. **ゲーム設定画面** - 設定機能追加時に

---

## 📝 注意事項

- デザインテーマはTRDS (Torii Resonance Design System) を基準とし、必要箇所に段階的に適用する
- レスポンシブデザインを考慮すること
- アクセシビリティを意識すること
- 既存のコンポーネント（Ofuda、Hanko）を活用すること
- リアルタイム更新を考慮した設計にすること

